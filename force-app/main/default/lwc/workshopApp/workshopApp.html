<template>
    <!-- ✅ NEW: TWO-COLUMN LAYOUT USING SLDS GRID -->
    <div class="slds-grid slds-wrap">

        <!-- ✅ LEFT NAVIGATION PANEL -->
        <template if:false={isNavCollapsed}>
            <div class="slds-size_1-of-4 slds-p-around_medium slds-box slds-theme_default">
                <div class="slds-grid slds-grid_align-spread slds-m-bottom_small">
                    <h2 class="slds-text-heading_small">Workshops</h2>
                    <lightning-button-icon icon-name="utility:chevronleft" variant="border-filled" alternative-text="Collapse" onclick={toggleNav}></lightning-button-icon>
                </div>
                <lightning-vertical-navigation selected-item={selectedWorkshopId} onselect={handleWorkshopSelect}>
                    <lightning-vertical-navigation-section>
                        <template for:each={workshops} for:item="ws">
                            <div key={ws.Id} class="slds-grid slds-grid_align-spread slds-m-vertical_x-small">
                                <lightning-vertical-navigation-item
                                    label={ws.Name}
                                    name={ws.Id}>
                                </lightning-vertical-navigation-item>
                                <span class="slds-badge "> {ws.UserProgressCount} of {ws.StepCount} Steps</span>
                            </div>
                        </template>
                    </lightning-vertical-navigation-section>
                </lightning-vertical-navigation>
            </div>
        </template>
        <template if:true={isNavCollapsed}>
            <div class="slds-p-around_medium slds-box slds-theme_default slds-m-right_small">
                <lightning-button-icon icon-name="utility:chevronright" variant="border-filled" alternative-text="Expand" onclick={toggleNav}></lightning-button-icon>
            </div>
        </template>

        <!-- ✅ RIGHT CONTENT PANEL -->
        <div class={rightPanelClass}>
            <!-- ⚙️ UNCHANGED: START BUTTON -->
            <template if:true={showStartButton}>
                <!-- ✅ Show description if available -->
   <p class="slds-text-body_regular slds-m-bottom_medium">
        {selectedWorkshopDescription}
    </p>

                <lightning-button label="Start Workshop" onclick={handleStartWorkshop}></lightning-button>
            </template>

            <!-- ⚙️ UNCHANGED: STEPS, PROGRESS, PAGINATION -->
            <template if:false={showStartButton}>
                <!-- ✅ NEW PATH INDICATOR -->
<lightning-progress-indicator 
    type="path" 
    variant="base" 
    current-step={currentPathStep}>

    <template for:each={steps} for:item="step" for:index="index">
        <lightning-progress-step 
            key={step.Id}
            label={step.Name}
            value={index}>
        </lightning-progress-step>
    </template>

</lightning-progress-indicator>

                <lightning-accordion allow-multiple-sections-open class="slds-m-vertical_medium">
    <template for:each={paginatedSteps} for:item="step">
        <lightning-accordion-section
            key={step.Id}
            name={step.Id}
            label={step.Name}>

            <c-step-detail 
                step={step} 
                is-admin={isAdmin} 
                onstepcomplete={handleStepComplete}>
            </c-step-detail>

        </lightning-accordion-section>
    </template>
</lightning-accordion>


                <div class="slds-m-top_medium">
                    <lightning-button 
                        label="Previous" 
                        onclick={handlePrev} 
                        disabled={isFirstPage}>
                    </lightning-button>

                    <lightning-button 
                        label="Next" 
                        onclick={handleNext} 
                        disabled={isLastPage} 
                        class="slds-m-left_small">
                    </lightning-button>

                    <lightning-button 
                        label="Save Progress" 
                        onclick={handleSaveProgress} 
                        class="slds-m-left_small">
                    </lightning-button>
                </div>
            </template>

        </div>
    </div>
</template>
